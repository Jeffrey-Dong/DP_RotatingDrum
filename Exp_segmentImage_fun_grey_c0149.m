function [BW,maskedImage] = segmentImage(X)
%segmentImage Segment image using auto-generated code from imageSegmenter app
%  [BW,MASKEDIMAGE] = segmentImage(X) segments image X using auto-generated
%  code from the imageSegmenter app. The final segmentation is returned in
%  BW, and a masked image is returned in MASKEDIMAGE.

% Auto-generated by imageSegmenter app on 27-Jun-2022
%----------------------------------------------------


% Adjust data to span data range.
X = imadjust(X);

% Graph cut
foregroundInd = [524694 524695 524698 524700 524703 524705 524706 524711 524714 529014 529036 529041 530090 530127 532249 533372 533374 535489 535534 537649 538777 538778 540887 540942 541967 544182 546287 546343 547364 547427 549524 550667 550668 552828 554924 556068 558164 558228 559244 559310 563562 563630 564642 566802 567953 570042 570113 572202 573353 575442 575513 576522 578755 580842 580915 581922 581934 581935 581938 581940 581943 584155 585172 585183 587322 587324 587326 587348 589558 590562 590590 590638 592719 592722 593793 593797 595993 596041 598109 599188 599281 601398 604683 606745 606843 607820 607884 610046 612246 615375 615449 615486 616452 620887 621932 624007 624094 625081 625207 627334 629494 630476 630575 632771 633714 635871 638138 638174 639109 641263 642462 642494 646814 647741 647862 651135 653135 655293 655423 658530 659747 659779 661765 665182 667164 668240 670583 672559 672707 673636 673823 675794 675983 678143 679031 679187 681191 681387 682467 687669 687867 693066 695224 695427 699541 699747 701873 701908 703860 707308 708176 710513 713788 715733 719188 721132 721313 722208 724588 725668 727608 729956 729988 731071 733007 736244 736471 738596 738631 741642 745111 747039 748316 750277 750407 750412 750415 750417 750420 750513 752566 752582 753716 755674 755878 755913 756752 759118 761225 761316 764309 764521 764558 765388 765514 765601 769961 770784 771001 771043 774286 776305 776401 776447 776451 778341 779692 781854 782659 782828 782881 784816 784941 787257 788281 790499 791295 791579 793742 796691 796921 798850 800224 802268 802321 802384 804247 804372 804481 805561 807485 807787 810961 813005 814267 817199 817441 819670 821517 821830 822843 826917 827232 828243 830348 830472 831354 831552 833643 835552 836952 839869 840123 840190 842029 845523 845590 850990 852823 853150 854163 857141 857470 859563 861790 862541 864818 870430 871383 873335 873606 874532 874750 876910 878731 882246 883390 887370 890607 893046 893107 893964 896007 896220 897427 904926 904987 905720 914646 916519 916864 918796 919755 920046 922264 928686 928744 930554 931752 931847 933790 934144 936304 937326 940624 944712 944942 947826 949262 951366 951422 956462 956822 960006 963159 963246 963299 968341 968699 970806 970859 971578 976259 977286 977336 982376 982686 984894 985613 987988 989214 991329 994611 997809 997851 1001951 1003251 1005411 1006449 1008283 1008500 1010591 1010809 1011672 1011849 1014049 1014762 1017076 1019449 1020317 1020489 1022482 1022533 1023398 1023612 1025725 1025926 1027890 1027892 1030955 1031137 1031140 1031141 1032223 1032226 1032231 1032244 1032245 1034529 1036559 1036561 1036723 1039589 1042123 1043166 1043203 1044989 1054704 1055079 1057206 1060101 1060479 1065843 1065878 1067658 1069118 1072323 1074518 1076293 1076675 1077373 1080963 1080995 1084930 1086395 1089601 1089633 1095033 1096805 1097193 1097881 1100398 1102558 1102590 1103277 1105645 1105648 1105658 1105661 1105668 1105671 1105676 1105830 1106757 1106875 1108880 1110833 1111081 1111230 1116230 1116428 1116485 1117309 1117671 1119830 1119870 1120744 1120809 1122903 1124862 1125227 1126348 1128465 1129181 1131610 1133499 1133696 1133862 1134988 1137816 1138180 1139974 1140385 1142330 1143625 1145737 1146451 1151134 1155085 1155505 1157530 1157612 1159769 1160483 1160903 1162844 1163720 1164143 1169117 1169543 1171644 1174810 1176877 1177044 1179909 1181420 1183521 1185305 1186817 1190702 1192154 1192217 1193940 1194375 1199337 1200852 1202950 1203012 1203970 1205816 1208184 1208346 1208409 1214446 1217047 1218060 1220923 1221364 1223081 1226763 1228478 1229999 1232097 1233876 1234093 1234255 1235396 1237113 1238347 1238349 1238354 1238357 1238359 1238362 1240795 1242661 1243736 1244035 1246132 1246971 1247159 1247210 1249431 1251144 1254525 1254830 1256680 1256927 1257620 1257802 1260997 1261244 1263019 1263245 1263465 1265315 1265564 1265625 1266252 1266392 1266642 1269682 1271649 1271787 1272039 1272102 1275026 1277048 1277391 1277498 1278517 1278577 1280284 1282677 1283659 1283914 1283974 1285683 1286962 1287151 1287212 1291076 1291216 1292546 1292609 1297905 1297945 1299711 1299853 1300167 1302947 1306402 1306642 1308343 1308586 1308738 1309568 1313055 1313119 1314822 1316975 1318516 1320361 1320612 1323452 1323813 1323911 1327150 1328851 1329244 1332084 1332341 1332447 1332546 1334435 1334705 1335554 1335721 1337483 1339793 1340716 1341117 1341182 1343067 1344356 1346477 1346577 1348734 1349534 1352591 1352768 1352954 1352988 1354989 1355209 1356905 1357067 1358165 1358381 1360415 1360606 1361220 1361400 1361620 1363744 1365900 1365903 1366784 1367015 1367079 1368777 1368953 1370099 1370131 1370215 1370248 1372477 1374172 1374349 1375249 1375645 1375711 1377772 1378847 1380931 1382804 1382981 1383266 1386217 1386400 1386432 1387119 1387583 1389276 1389457 1389531 1389636 1389671 1391613 1391898 1392691 1392975 1395066 1395751 1397910 1398097 1398370 1400326 1401403 1401533 1401609 1405463 1405638 1405717 1405722 1405819 1406786 1406790 1406930 1406999 1409058 1409780 1409955 1410021 1410131 1410136 1412134 1414095 1414333 1414334 1414440 1414448 1414477 1414557 1415352 1415408 1415410 1415496 1415499 1415501 1415503 1415515 1418412 1418871 1420948 1421029 1422931 1423810 1424183 1426142 1427044 1427505 1429573 1429661 1431571 1432442 1432620 1435057 1435679 1436045 1438014 1438295 1440359 1441076 1443688 1444767 1446474 1446831 1448808 1448851 1448987 1449711 1452219 1452320 1453126 1453295 1453396 1455110 1457440 1457491 1457610 1457716 1458687 1458791 1460505 1461758 1461814 1462029 1463742 1464186 1466237 1466242 1467314 1467421 1469138 1469576 1472548 1472813 1474533 1474968 1477772 1477944 1478096 1478207 1481180 1481440 1483169 1483490 1483596 1484714 1488564 1488991 1489032 1489812 1490109 1491801 1492115 1492228 1492268 1493303 1495503 1495506 1497199 1497366 1497621 1497661 1498276 1498586 1500855 1500896 1500898 1501821 1501973 1503978 1505834 1506250 1506288 1507076 1507328 1507367 1509373 1510602 1512471 1514468 1514882 1515957 1515999 1518942 1519080 1519195 1519232 1520945 1521349 1523103 1523397 1524472 1524631 1527420 1527827 1527864 1529732 1531887 1532141 1533216 1533263 1534978 1536339 1536455 1536499 1538497 1538603 1538608 1540651 1541598 1541842 1541895 1543612 1543995 1547123 1547229 1547230 1549145 1549451 1550089 1550357 1550464 1550527 1552621 1555485 1555615 1555851 1555856 1555923 1557909 1558008 1558721 1558851 1558980 1558982 1559162 1561002 1561243 1563296 1564236 1564478 1564559 1566632 1567357 1567468 1569766 1569870 1571673 1571921 1572026 1572114 1573191 1575258 1575262 1578385 1578388 1578586 1580304 1580306 1580314 1580653 1581391 1583554 1583888 1584631 1584854 1584965 1586793 1587221 1588951 1589166 1589280 1590031 1590033 1590358 1592196 1593269 1593276 1593277 1593476 1593592 1595429 1595750 1595855 1597597 1597791 1598013 1598681 1598985 1600826 1601139 1601921 1604064 1604081 1604262 1604374 1604488 1606533 1606645 1607321 1607494 1607497 1609464 1609481 1609766 1609880 1610541 1610561 1610952 1610955 1612887 1613001 1615043 1615155 1615160 1615262 1615267 1615941 1615961 1618279 1618392 1618478 1618482 1618483 1618485 1618490 1618493 1618494 1618498 1620260 1620281 1620435 1620547 1620637 1620638 1621714 1621717 1623665 1623670 1623779 1623785 1624576 1624601 1624742 1624854 1624952 1624954 1626735 1627109 1629057 1629161 1629168 1629172 1630001 1630240 1630243 1630346 1630347 1632135 1632292 1632506 1633364 1633369 1633475 1635373 1635401 1635633 1635741 1635742 1637679 1637788 1637893 1637896 1637898 1638641 1638756 1638854 1638859 1638971 1640773 1640802 1641882 1641986 1641991 1642206 1644145 1644262 1646170 1646202 1646204 1646420 1646520 1647284 1647374 1649408 1649519 1649529 1650527 1650529 1650838 1652692 1652693 1652758 1654808 1654903 1654905 1655152 1655935 1655941 1656129 1656230 1658103 1658108 1658113 1658119 1658124 1658125 1658130 1658132 1658138 1659125 1659469 1661526 1661625 1663784 1664525 1664761 1667000 1667001 1667019 1667021 1667765 1668096 1669925 1670237 1670240 1672085 1672395 1672416 1673383 1673387 1673472 1673486 1673489 1673491 1675325 1676405 1676407 1676707 1678865 1680727 1680730 1680932 1681812 1681815 1681820 1681893 1681895 1681900 1681902 1681906 1681910 1681914 1681919 1681922 1681927 1681929 1681930 1681937 1682003 1682099 1685061 1685066 1685068 1685074 1685079 1685084 1685085 1685090 1685093 1685098 1685103 1685105 1685109 1685113 1685117 1685122 1685127 1685182 1685186 1685191 1685196 1685199 1685204 1685206 1685212 1685217 1685222 1685227 1685231 1685235 1685239 1685241 1689657 1690731 1695046 1699363 1703678 1706912 1707987 1709927 1712087 1712092 1712097 1712299 1712302 1715343 1715345 1715349 1715351 1715356 1715362 1715367 1715508 1715510 1715515 1715520 1715524 1715528 1715532 1715534 1716449 1716453 1716458 1716462 1716466 1716468 1716473 1716479 1716484 1716486 1716490 1716494 1716498 1716500 1716505 1716510 1716516 1716521 1716526 1716527 1716532 1716535 1716540 1716545 1716550 1716553 1716555 1716559 1716564 1716569 1716575 1716577 1716582 ];
backgroundInd = [405877 405882 405887 405892 405895 409113 409140 410189 412385 412390 414508 414553 415583 417798 418820 421046 421049 421050 423215 424215 426458 426463 427545 429708 431772 432953 435115 436085 438359 438363 440401 440527 443769 443772 444852 444854 446877 449033 449177 450259 450260 454583 455509 455665 457665 457825 461068 463230 464141 466297 467555 472770 475118 478167 480521 481402 483763 488959 489167 490251 493274 495652 497588 501904 502136 509460 512693 515099 516179 518088 519167 521580 526720 526984 530224 532119 535352 535627 540749 541027 547508 549668 550461 555068 555858 558312 563413 563712 564490 564792 570193 572045 575593 576362 580677 582076 584994 587476 589638 590391 593629 593958 601184 601518 603678 613398 616293 616638 618798 620958 621691 623848 624201 632841 633921 635723 638960 639321 642563 644359 644723 646883 650126 655149 655526 659848 664171 667021 668491 668492 670652 673896 675651 676056 678217 681460 682540 682542 686862 687942 687944 689682 693344 696160 696587 698314 701988 704148 704790 707392 708472 710186 710632 712344 713872 713873 716033 718821 719273 721436 722516 725756 727918 729611 733930 738243 746878 761987 764142 784649 787885 801918 804072 810550 819180 829972 838603 852636 862350 873144 881779 901208 910921 930355 956263 985415 1001604 1030756 1062063 1093372 1119279 1150588 1172880 1177200 1178278 1180436 1180438 1180815 1183676 1185836 1189076 1197713 1200249 1203113 1204192 1209592 1212828 1214286 1214988 1220387 1226864 1231554 1232264 1234420 1236945 1236948 1238740 1240185 1242340 1242343 1243059 1245578 1245580 1246658 1247379 1248815 1248826 1252053 1252776 1257450 1259609 1260334 1262849 1265007 1265734 1266811 1268247 1269324 1275446 1276879 1280846 1282276 1283004 1286593 1287321 1290908 1294878 1295225 1299543 1300276 1303858 1306015 1306753 1308912 1312492 1313232 1315388 1317887 1320045 1321867 1324027 1325442 1328681 1329424 1334077 1334820 1337313 1341299 1342709 1343459 1348856 1349186 1352421 1355332 1357492 1357818 1361811 1368612 1369367 1370447 1374010 1375846 1378327 1382645 1383403 1384479 1389879 1392359 1393118 1395597 1400994 1401755 1403152 1403913 1409310 1414710 1415028 1417184 1417948 1423345 1423661 1424423 1429060 1429820 1434456 1436300 1441699 1443092 1443855 1450334 1451727 1455731 1457124 1457889 1463602 1464366 1465755 1466524 1470841 1472234 1474387 1476238 1480553 1487030 1489188 1489496 1493503 1497051 1501060 1501368 1506454 1512159 1512932 1515086 1515394 1520791 1521562 1523718 1530193 1531581 1532350 1538825 1540978 1544214 1545292 1546690 1549607 1552086 1555004 1558237 1561476 1562878 1563631 1567195 1570105 1572263 1574752 1576578 1584132 1584467 1587367 1588784 1592764 1593104 1595262 1595999 1598156 1600662 1601391 1606785 1610020 1610379 1611098 1615412 1615778 1617938 1621887 1624042 1624418 1626578 1627279 1629437 1632672 1633749 1638064 1638458 1640618 1642378 1646693 1649258 1649925 1649928 1651000 1654658 1655319 1656392 1659628 1661138 1661786 1665021 1668255 1673647 1673651 1676882 1678421 1682279 1683822 1685514 1689222 1689827 1690906 1692466 1695221 1696295 1697867 1699533 1701114 1701688 1704920 1704925 1706517 1707079 1710314 1712467 1713002 1715706 1716248 1716778 1721096 1721650 1722168 1722170 1724896 1725403 1729717 1730298 1730792 1733544 1735706 1738344 1738349 1738951 1739419 1741115 1742656 1744359 1744811 1746523 1748050 1749765 1750205 1753011 1753438 1755176 1756672 1758418 1758825 1759504 1762061 1763829 1763831 1765289 1765294 1767077 1767448 1769242 1770324 1770328 1770683 1773572 1773915 1773917 1776070 1777896 1778981 1778984 1779307 1781460 1781462 1784696 1786556 1786849 1787640 1787645 1790081 1790084 1790887 1793050 1793055 1793316 1795472 1796300 1798463 1798704 1798708 1799779 1801708 1801713 1803877 1804094 1807121 1807125 1807328 1808210 1808213 1810560 1812538 1812540 1812716 1815786 1815951 1816871 1816876 1819183 1821197 1821204 1821335 1821340 1822289 1822290 1824571 1825535 1825538 1825643 1825647 1829863 1829868 1829953 1829956 1829961 1830951 1830956 1830958 1830962 1830967 1830975 1830978 1830983 1830988 1830999 1831001 1831006 1831011 1831014 1831019 1831023 1831028 ];
L = superpixels(X,10468);
BW = lazysnapping(X,L,foregroundInd,backgroundInd);

% Create masked image.
maskedImage = X;
maskedImage(~BW) = 0;
end

